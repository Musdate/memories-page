import{a as O,b as P}from"./chunk-W6CDIVRV.js";import{a as S}from"./chunk-WKARWWOO.js";import{a as q}from"./chunk-IZGYBH2K.js";import{d as w,e as R,i as F}from"./chunk-3SD2HFRY.js";import{b as N,c as r,d as A,e as D,g as x,j as G,m as k,o as T,p as I}from"./chunk-6424UODT.js";import{a as j,b as L}from"./chunk-ZIYSPSZR.js";import"./chunk-POUALIHI.js";import{Ba as v,Hb as _,Jb as E,Pa as y,Qa as C,R as n,Ua as s,Va as l,Wa as p,Xa as c,ab as M,ea as h,gb as g,jb as b,kb as m,ra as i}from"./chunk-WIJM5ZBD.js";import{e as V}from"./chunk-C6Q5SG76.js";var u=V(j());var f=t=>({"error-input":t}),z=()=>["/auth/login"];function B(t,e){t&1&&c(0,"app-loading")}var d=class t{fb=n(T);router=n(w);authService=n(S);alertService=n(L);isLoading=h(!1);errorMessages=new Map;lastErrorMessages="";userForm=this.fb.group({name:["",[r.required]],email:["",[r.required,r.email]],password:["",[r.required,r.minLength(6),r.maxLength(20)]]});ngOnDestroy(){this.errorMessages.size>0&&u.default.close()}onRegister(){u.default.close(),this.userForm.valid?(this.isLoading.set(!0),this.authService.register(this.userForm.value).subscribe({next:e=>{if(e){this.alertService.showSuccess({text:"Registro Exitoso!!",timer:2e3}),this.router.navigateByUrl(P.landing);return}},error:e=>{this.alertService.showError({text:e.error.message||"Error en el registro.",timer:2e3}),this.isLoading.set(!1)},complete:()=>{this.isLoading.set(!1)}})):(this.userForm.markAllAsTouched(),this.showErrorAlert())}hasErrors(e){return this.userForm.get(e)?.invalid&&this.userForm.get(e)?.touched?(this.errorMessages.set(e,O[e]),this.showErrorAlert(),!0):(this.errorMessages.delete(e),this.showErrorAlert(),!1)}showErrorAlert(){let e=[...this.errorMessages.values()].join("<br>");this.lastErrorMessages!==e&&(this.lastErrorMessages=e,this.errorMessages.size>0?this.alertService.showError({text:e,toast:!0}):u.default.close())}static \u0275fac=function(a){return new(a||t)};static \u0275cmp=v({type:t,selectors:[["app-register"]],decls:10,vars:13,consts:[[1,"container","layout"],[3,"ngSubmit","formGroup"],["type","text","formControlName","name","placeholder","Nombre",1,"input",3,"ngClass"],["type","email","formControlName","email","placeholder","Email",1,"input",3,"ngClass"],["type","password","formControlName","password","placeholder","Contrase\xF1a",1,"input",3,"ngClass"],["type","submit",1,"primary-btn"],[3,"routerLink"]],template:function(a,o){a&1&&(y(0,B,1,0,"app-loading"),l(1,"div",0)(2,"form",1),M("ngSubmit",function(){return o.onRegister()}),c(3,"input",2)(4,"input",3)(5,"input",4),l(6,"button",5),g(7," REGISTRAR "),p(),l(8,"a",6),g(9," Ingresar "),p()()()),a&2&&(C(o.isLoading()?0:-1),i(2),s("formGroup",o.userForm),i(),s("ngClass",m(6,f,o.hasErrors("name"))),i(),s("ngClass",m(8,f,o.hasErrors("email"))),i(),s("ngClass",m(10,f,o.hasErrors("password"))),i(3),s("routerLink",b(12,z)))},dependencies:[F,R,I,x,N,A,D,G,k,q,E,_],styles:['@font-face{font-family:Roboto;src:url(/assets/fonts/Roboto.woff2) format("woff2"),url(/assets/fonts/Roboto.woff) format("woff");font-weight:400;font-style:normal;font-display:swap}.layout[_ngcontent-%COMP%]{width:27.5rem}.layout[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:4.5rem;padding:0rem 1.5rem;border-radius:1rem;border:none;background:#fff;color:#404040;caret-color:silver;margin:0rem 0rem 5rem}.layout[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:silver}.layout[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.layout[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-style:italic}.layout[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;text-align:center;margin:5rem 0rem 2.5rem;cursor:pointer;color:#fff}.layout[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#6cc2e6}']})};export{d as default};
